# Production Environment Configuration Template
# Copy this file to .env.production and fill in the actual values
# NEVER commit the actual .env.production file to version control

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# Allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# Generate strong secrets using: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secure-jwt-secret-at-least-32-characters-long
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-at-least-32-characters-long
JWT_ISSUER=event-joining-app
JWT_AUDIENCE=event-joining-users

# Token expiration times
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# =============================================================================
# SUPABASE DATABASE
# =============================================================================
SUPABASE_URL=https://placeholder.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsYWNlaG9sZGVyIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDU1NjcyMDAsImV4cCI6MTk2MTA0MzIwMH0.placeholder
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBsYWNlaG9sZGVyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY0NTU2NzIwMCwiZXhwIjoxOTYxMDQzMjAwfQ.placeholder

# Database connection settings
DB_POOL_SIZE=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Password Security
PASSWORD_SALT_ROUNDS=12
PASSWORD_MIN_LENGTH=8
PASSWORD_MAX_LENGTH=128
PASSWORD_MAX_ATTEMPTS=5
PASSWORD_LOCKOUT_DURATION=900000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5

# Session Management
SESSION_SECRET=your-session-secret-key
SESSION_MAX_AGE=86400000
SESSION_MAX_CONCURRENT=5

# Security Headers
HSTS_MAX_AGE=31536000
CSP_REPORT_URI=https://yourdomain.com/csp-report

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# Enable audit logging
AUDIT_LOGGING=true
AUDIT_EVENTS=login,logout,password_change,role_change,data_access

# Health check configuration
HEALTH_CHECK_PATH=/health
METRICS_PATH=/metrics
METRICS_ENABLED=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email Service (if using)
EMAIL_SERVICE_API_KEY=your-email-service-api-key
EMAIL_FROM_ADDRESS=noreply@yourdomain.com
EMAIL_FROM_NAME=Event Joining App

# SMS Service (if using)
SMS_SERVICE_API_KEY=your-sms-service-api-key
SMS_FROM_NUMBER=+1234567890

# File Upload Service (if using)
FILE_UPLOAD_MAX_SIZE=10485760
FILE_UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis (if using for sessions/cache)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# Cache settings
CACHE_TTL=300
CACHE_MAX_SIZE=100

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================

# SSL Certificate paths (if handling SSL in Node.js)
SSL_CERT_PATH=/path/to/certificate.crt
SSL_KEY_PATH=/path/to/private.key
SSL_CA_PATH=/path/to/ca-bundle.crt

# Force HTTPS
FORCE_HTTPS=true

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================

# Application Performance Monitoring
APM_SERVICE_NAME=event-joining-app
APM_SERVICE_VERSION=1.0.0
APM_ENVIRONMENT=production

# Error tracking service
ERROR_TRACKING_DSN=https://your-error-tracking-dsn

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
FEATURE_REGISTRATION=true
FEATURE_PASSWORD_RESET=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_SOCIAL_LOGIN=false

# =============================================================================
# MAINTENANCE MODE
# =============================================================================

# Maintenance mode settings
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=The application is currently under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# =============================================================================
# DEPLOYMENT INFORMATION
# =============================================================================

# Deployment metadata
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_DATE=2024-01-01T00:00:00Z
DEPLOYMENT_COMMIT_HASH=abc123def456
DEPLOYMENT_ENVIRONMENT=production

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 
# 1. Generate strong, unique secrets for JWT_SECRET and JWT_REFRESH_SECRET
# 2. Use HTTPS in production - configure your reverse proxy (nginx, Apache)
# 3. Set up proper firewall rules
# 4. Enable database SSL connections
# 5. Regularly rotate secrets and API keys
# 6. Monitor logs for suspicious activity
# 7. Keep dependencies updated
# 8. Use a secrets management service in production
# 9. Enable database backups
# 10. Set up monitoring and alerting
#
# =============================================================================

# =============================================================================
# DEPLOYMENT CHECKLIST
# =============================================================================
#
# Before deploying to production:
# 
# [ ] All environment variables are set with production values
# [ ] JWT secrets are strong and unique (32+ characters)
# [ ] Database connection is secure (SSL enabled)
# [ ] CORS origins are properly configured
# [ ] Rate limiting is enabled
# [ ] Security headers are configured
# [ ] Logging is properly set up
# [ ] Health checks are working
# [ ] SSL/TLS certificates are installed
# [ ] Firewall rules are configured
# [ ] Backup strategy is implemented
# [ ] Monitoring and alerting are set up
# [ ] Error tracking is configured
# [ ] Performance monitoring is enabled
# [ ] Security scanning is completed
# [ ] Load testing is performed
# [ ] Disaster recovery plan is documented
#
# =============================================================================